{"remainingRequest":"G:\\cache\\20230625_copy\\dms\\node_modules\\babel-loader\\lib\\index.js!G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\cache\\20230625_copy\\dms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\cache\\20230625_copy\\dms\\src\\views\\manage\\repair\\components\\imagesUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\cache\\20230625_copy\\dms\\src\\views\\manage\\repair\\components\\imagesUpload.vue","mtime":1644741256000},{"path":"G:\\cache\\20230625_copy\\dms\\babel.config.js","mtime":1644741256000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL2F1dGgiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImltYWdlc1VwbG9hZCIsCiAgcHJvcHM6IHsKICAgIGltYWdlczogewogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dJbWFnZVVybDogJycsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhY3Rpb246IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEkgKyAiL3Blcm1pc3Npb24vdXBsb2FkIiwKICAgICAgaGVhZGVyOiB7CiAgICAgICAgIl91dCI6IGdldFRva2VuKCkKICAgICAgfSwKICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICB0aGlzLmltYWdlTGlzdC5zcGxpY2UodGhpcy5pbWFnZUxpc3QuaW5kZXhPZihmaWxlLnNhdmVOYW1lKSwgMSk7CiAgICAgIHRoaXMuJGVtaXQoIm9uQ2hhbmdlIiwgdGhpcy5pbWFnZUxpc3QpOwogICAgfSwKCiAgICBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIGhhbmRsZVN1Y2Nlc3MocmVzLCBmaWxlLCBmaWxlTGlzdCkgewogICAgICBpZiAocmVzLnN0YXR1c0NvZGUgIT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgICBmaWxlTGlzdC5zcGxpY2UoZmlsZUxpc3QuaW5kZXhPZihmaWxlKSwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZmlsZS5zYXZlTmFtZSA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMuaW1hZ2VMaXN0LnB1c2gocmVzLmRhdGEpOwogICAgICAgIHRoaXMuJGVtaXQoIm9uQ2hhbmdlIiwgdGhpcy5pbWFnZUxpc3QpOwogICAgICB9CiAgICB9LAoKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgb2YgdGhpcy5pbWFnZXMpIHsKICAgICAgICB0aGlzLmltYWdlTGlzdC5wdXNoKGkpOwogICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh7CiAgICAgICAgICBzYXZlTmFtZTogaSwKICAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9JTUdfUFJFRklYICsgaQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICB9Cgp9Ow=="},{"version":3,"mappings":"AAmBA;AACA;EACAA,oBADA;EAEAC;IACAC;MACAC;IADA;EADA,CAFA;;EAOAC;IACA;MACAC,kBADA;MAEAC,oBAFA;MAGAC,2DAHA;MAIAC;QACA;MADA,CAJA;MAOAC,aAPA;MAQAC;IARA;EAUA,CAlBA;;EAmBAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;MACA;IACA,CARA;;IASAC;MACA;QACA;UACAC,gBADA;UAEAC;QAFA;QAIAN;MACA,CANA,MAMA;QACAO;QACA;QACA;MACA;IACA,CArBA;;IAsBAC;MACA;;MACA;QACA;QACA;UACAC,WADA;UAEAC;QAFA;MAIA;IACA;;EA/BA,CAnBA;;EAoDAC;IACA;EACA;;AAtDA","names":["name","props","images","default","data","dialogImageUrl","dialogVisible","action","header","imageList","fileList","methods","handleRemove","handlePictureCardPreview","handleSuccess","message","type","file","init","saveName","url","created"],"sourceRoot":"src/views/manage/repair/components","sources":["imagesUpload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n        :action=\"action\"\r\n        :headers=\"header\"\r\n        list-type=\"picture-card\"\r\n        :on-preview=\"handlePictureCardPreview\"\r\n        :on-success=\"handleSuccess\"\r\n        :file-list=\"fileList\"\r\n        :on-remove=\"handleRemove\">\r\n      <i class=\"el-icon-plus\"></i>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getToken} from \"@/utils/auth\";\r\nexport default {\r\n  name: \"imagesUpload\",\r\n  props:{\r\n    images: {\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      action: process.env.VUE_APP_BASE_API + \"/permission/upload\",\r\n      header: {\r\n        \"_ut\": getToken()\r\n      },\r\n      imageList: [],\r\n      fileList: []\r\n    };\r\n  },\r\n  methods: {\r\n    handleRemove(file, fileList) {\r\n      this.imageList.splice(this.imageList.indexOf(file.saveName), 1)\r\n      this.$emit(\"onChange\", this.imageList)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleSuccess(res, file, fileList) {\r\n      if (res.statusCode !== 200) {\r\n        this.$message({\r\n          message: res.msg,\r\n          type: 'error'\r\n        });\r\n        fileList.splice(fileList.indexOf(file), 1)\r\n      } else {\r\n        file.saveName = res.data\r\n        this.imageList.push(res.data)\r\n        this.$emit(\"onChange\", this.imageList)\r\n      }\r\n    },\r\n    init() {\r\n      this.fileList = []\r\n      for (let i of this.images) {\r\n        this.imageList.push(i)\r\n        this.fileList.push({\r\n          saveName: i,\r\n          url: process.env.VUE_APP_IMG_PREFIX + i\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}