{"remainingRequest":"G:\\cache\\20230625_copy\\dms\\node_modules\\babel-loader\\lib\\index.js!G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!G:\\cache\\20230625_copy\\dms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\cache\\20230625_copy\\dms\\src\\components\\Message\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\cache\\20230625_copy\\dms\\src\\components\\Message\\index.vue","mtime":1644741256000},{"path":"G:\\cache\\20230625_copy\\dms\\babel.config.js","mtime":1644741256000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\cache\\20230625_copy\\dms\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbGlzdCwgZGVsZXRlUmVjZWl2ZSwgZGVsZXRlU2VuZCwgcXVlcnksIGxpc3RTZW5kLCBzZW5kVG9CdWlsZGluZywgcXVlcnlkZXRhaWwgfSBmcm9tICJAL2FwaS9ub3RpY2UiOwppbXBvcnQgeyBkZWwsIGxpc3RGbG93LCBsaXN0TXksIGxpc3RNeUZsb3csIHF1ZXJ5IGFzIHF1ZXJ5RGVwYXJ0LCB1cGRhdGUgfSBmcm9tICJAL2FwaS9kZXBhcnQiOwppbXBvcnQgeyBsaXN0IGFzIGxpc3RCdWlsZGluZyB9IGZyb20gJ0AvYXBpL2J1aWxkaW5nJzsKaW1wb3J0IHsgcXVlcnkgYXMgcXVlcnlTdHVkZW50IH0gZnJvbSAnQC9hcGkvc3R1ZGVudCc7CmltcG9ydCBUcmVlU2VsZWN0IGZyb20gJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0JzsKaW1wb3J0ICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyI7CmltcG9ydCB7IGNvdW50VW5yZWFkIH0gZnJvbSAiQC9hcGkvbG9naW4iOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiaW5kZXgiLAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWVTZWxlY3QKICB9LAogIHByb3BzOiBbJ2NoYW5nZSddLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZVRvU2VuZFJ1bGVzOiB7CiAgICAgICAgbXNnOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+35aGr5YaZ5YaF5a65JywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHZlcmlmeVJ1bGVzOiB7CiAgICAgICAgaXNBZ3JlZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIumAieaLqeaYr+WQpuWQjOaEjyIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBtZXNzYWdlVG9TZW5kOiB7CiAgICAgICAgbXNnOiB1bmRlZmluZWQsCiAgICAgICAgdG86IHVuZGVmaW5lZAogICAgICB9LAogICAgICBidWlsZGluZ0xpc3Q6IFtdLAogICAgICBhY3RpdmVOYW1lOiAnMScsCiAgICAgIG1zZ0FjdGl2ZU5hbWU6ICdyZWNlaXZlJywKICAgICAgZGVwYXJ0QWN0aXZlTmFtZTogJ3JlY2VpdmUnLAogICAgICBtc2c6IHsKICAgICAgICB0bzogdW5kZWZpbmVkLAogICAgICAgIG1zZzogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIG1zZ0RldGFpbDogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgbXNnOiB1bmRlZmluZWQsCiAgICAgICAgdXNlcjoge30KICAgICAgfSwKICAgICAgbXNnRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRlcGFydFZlcmlmeURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICB2ZXJpZnlEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGVwYXJ0QXBwbGljYXRpb25Vc2VyOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBpc0FncmVlOiB1bmRlZmluZWQsCiAgICAgICAgcmVhc29uOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgcGFnZUluZm86IHt9LAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHJvd3M6IDEwLAogICAgICAgIGVudGl0eToge30KICAgICAgfSwKICAgICAgc3R1ZGVudDoge30sCiAgICAgIGRlcGFydFZlcmlmeUxpc3Q6IFtdCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGRvVGFwQ2hhbmdlKCkgewogICAgICBsZXQgdGFiID0gdGhpcy5hY3RpdmVOYW1lOwogICAgICBhd2FpdCB0aGlzLnJlZnJlc2hDb3VudCgpOwoKICAgICAgaWYgKHRhYiA9PT0gJzEnKSB7CiAgICAgICAgYXdhaXQgdGhpcy5kb01zZ1RhcENoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRhYiA9PT0gJzInKSB7CiAgICAgICAgYXdhaXQgdGhpcy5kb0RlcGFydFRhYkNoYW5nZSgpOwogICAgICB9IGVsc2UgaWYgKHRhYiA9PT0gJzMnKSB7fSBlbHNlIGlmICh0YWIgPT09ICc0JykgewogICAgICAgIHRoaXMubWVzc2FnZVRvU2VuZCA9IHsKICAgICAgICAgIG1zZzogdW5kZWZpbmVkLAogICAgICAgICAgdG86IHVuZGVmaW5lZAogICAgICAgIH07CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgZG9EZXBhcnRUYWJDaGFuZ2UoKSB7CiAgICAgIGlmICh0aGlzLmRlcGFydEFjdGl2ZU5hbWUgPT09ICdyZWNlaXZlJykgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgbGlzdE15Rmxvdyh0aGlzLmxpc3RRdWVyeSk7CiAgICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0TXkodGhpcy5saXN0UXVlcnkpOwogICAgICAgIHRoaXMucGFnZUluZm8gPSBkYXRhOwogICAgICB9CiAgICB9LAoKICAgIHN1Ym1pdFZlcmlmeSgpIHsKICAgICAgdGhpcy4kcmVmc1sndmVyaWZ5Rm9ybSddLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHVwZGF0ZSh0aGlzLmRlcGFydEFwcGxpY2F0aW9uVXNlcikudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuZG9UYXBDaGFuZ2UoKTsKICAgICAgICAgICAgICB0aGlzLmNsb3NlVmVyaWZ5RGlhbG9nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIHNob3dWZXJpZnlEaWFsb2coaWQpIHsKICAgICAgdGhpcy5kZXBhcnRBcHBsaWNhdGlvblVzZXIuaWQgPSBpZDsKICAgICAgdGhpcy52ZXJpZnlEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCgogICAgY2xvc2VWZXJpZnlEaWFsb2coKSB7CiAgICAgIHRoaXMuZGVwYXJ0QXBwbGljYXRpb25Vc2VyID0gewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgaXNBZ3JlZTogdW5kZWZpbmVkLAogICAgICAgIHJlYXNvbjogdW5kZWZpbmVkCiAgICAgIH07CiAgICAgIHRoaXMudmVyaWZ5RGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKCiAgICBhc3luYyBzaG93RGVwYXJ0VmVyaWZ5RGlhbG9nKGlkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSBhd2FpdCBsaXN0RmxvdyhpZCk7CiAgICAgIHRoaXMuZGVwYXJ0VmVyaWZ5TGlzdCA9IGRhdGE7CgogICAgICBpZiAoZGF0YSkgewogICAgICAgIHRoaXMuZGVwYXJ0VmVyaWZ5RGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgZGVwYXJ0VmVyaWZ5RGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMuZGVwYXJ0VmVyaWZ5TGlzdCA9IFtdOwogICAgICB0aGlzLmRlcGFydFZlcmlmeURpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCgogICAgc2VuZE1zZygpIHsKICAgICAgaWYgKHRoaXMubWVzc2FnZVRvU2VuZC50byA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5a6/6IiN5qW8JywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnNbJ3NlbmRNc2cnXS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBzZW5kVG9CdWlsZGluZyh0aGlzLm1lc3NhZ2VUb1NlbmQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNhbmNlbCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+ato+ehruWhq+WGmeWPguaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5tZXNzYWdlVG9TZW5kID0gewogICAgICAgIHRvOiB1bmRlZmluZWQsCiAgICAgICAgbXNnOiB1bmRlZmluZWQKICAgICAgfTsKICAgIH0sCgogICAgYXN5bmMgbGlzdEJ1aWxkaW5nTGlzdCgpIHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IGF3YWl0IGxpc3RCdWlsZGluZygpOwogICAgICB0aGlzLmJ1aWxkaW5nTGlzdCA9IGRhdGE7CiAgICB9LAoKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuZG9UYXBDaGFuZ2UodGhpcy5hY3RpdmVOYW1lKTsKICAgIH0sCgogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucm93cyA9IHZhbDsKICAgICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpOwogICAgfSwKCiAgICBhc3luYyBtc2dRdWVyeShpZCwgdHlwZSkgewogICAgICBpZiAodHlwZSA9PT0gMSkgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgcXVlcnkoaWQpOwogICAgICAgIHRoaXMubXNnRGV0YWlsID0gZGF0YTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAyKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBxdWVyeWRldGFpbChpZCk7CiAgICAgICAgdGhpcy5tc2dEZXRhaWwgPSBkYXRhOwogICAgICB9CgogICAgICBhd2FpdCB0aGlzLmRvVGFwQ2hhbmdlKHRoaXMuYWN0aXZlTmFtZSk7CiAgICAgIHRoaXMubXNnRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIGFzeW5jIHJlZnJlc2hDb3VudCgpIHsKICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBjb3VudFVucmVhZCgpOwoKICAgICAgaWYgKGNvdW50KSB7CiAgICAgICAgc3RvcmUuY29tbWl0KCdTRVRfQ09VTlRfVU5SRUFEJywgY291bnQuZGF0YSk7CiAgICAgIH0KICAgIH0sCgogICAgbXNnRGlhbG9nQ2xvc2UoKSB7CiAgICAgIHRoaXMubXNnRGV0YWlsID0gewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgbXNnOiB1bmRlZmluZWQsCiAgICAgICAgdXNlcjogdW5kZWZpbmVkCiAgICAgIH07CiAgICAgIHRoaXMubXNnRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKCiAgICBhc3luYyBtc2dEZWwoaWQsIHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT09IDEpIHsKICAgICAgICBkZWxldGVSZWNlaXZlKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDIpIHsKICAgICAgICBkZWxldGVTZW5kKGlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1c0NvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IDMpIHsKICAgICAgICBkZWwoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmRvVGFwQ2hhbmdlKHRoaXMuYWN0aXZlTmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gNCkge30KICAgIH0sCgogICAgYXN5bmMgZG9Nc2dUYXBDaGFuZ2UoKSB7CiAgICAgIGlmICh0aGlzLm1zZ0FjdGl2ZU5hbWUgPT09ICdyZWNlaXZlJykgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgbGlzdCh0aGlzLmxpc3RRdWVyeSk7CiAgICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCBsaXN0U2VuZCh0aGlzLmxpc3RRdWVyeSk7CiAgICAgICAgdGhpcy5wYWdlSW5mbyA9IGRhdGE7CiAgICAgIH0KICAgIH0sCgogICAgbm9ybWFsaXplcihub2RlKSB7CiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIGRlbGV0ZSBub2RlLmNoaWxkcmVuOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlkOiBub2RlLmlkLAogICAgICAgIGxhYmVsOiBub2RlLm5hbWUsCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4KICAgICAgfTsKICAgIH0sCgogICAgYXN5bmMgZ2V0U3R1ZGVudChpZCkgewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gYXdhaXQgcXVlcnlTdHVkZW50KGlkKTsKICAgICAgdGhpcy5zdHVkZW50ID0gZGF0YTsKICAgIH0sCgogICAgaGlkZVBvcG92ZXIoKSB7CiAgICAgIHRoaXMuc3R1ZGVudCA9IHt9OwogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5kb1RhcENoYW5nZSh0aGlzLmFjdGl2ZU5hbWUpOwogIH0sCgogIHdhdGNoOiB7CiAgICBjaGFuZ2UodmFsKSB7CiAgICAgIGlmICh2YWwgPT09IDEpIHsKICAgICAgICB0aGlzLmRvVGFwQ2hhbmdlKHRoaXMuYWN0aXZlTmFtZSk7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA,aADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC,iBAHA;;EAIAC;IACA;MACAC;QACAC,MACA;UAAAC;UAAAC;UAAAC;QAAA,CADA;MADA,CADA;MAMAC;QACAC,UACA;UAAAJ;UAAAC;UAAAC;QAAA,CADA;MADA,CANA;MAWAG;QACAN,cADA;QAEAO;MAFA,CAXA;MAeAC,gBAfA;MAgBAC,eAhBA;MAiBAC,wBAjBA;MAkBAC,2BAlBA;MAmBAX;QACAO,aADA;QAEAP;MAFA,CAnBA;MAuBAY;QACAC,aADA;QAEAb,cAFA;QAGAc;MAHA,CAvBA;MA4BAC,uBA5BA;MA6BAC,gCA7BA;MA8BAC,0BA9BA;MA+BAC;QACAL,aADA;QAEAR,kBAFA;QAGAc;MAHA,CA/BA;MAoCAC,YApCA;MAqCAC;QACAC,OADA;QAEAC,QAFA;QAGAC;MAHA,CArCA;MA0CAC,WA1CA;MA2CAC;IA3CA;EA6CA,CAlDA;;EAmDAC;IACA;MACA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA,CAFA,MAEA,kBAEA,CAFA,MAEA;QACA;UACA3B,cADA;UAEAO;QAFA;MAIA;IACA,CAhBA;;IAiBA;MACA;QACA;UAAAT;QAAA;QACA;MACA,CAHA,MAGA;QACA;UAAAA;QAAA;QACA;MACA;IACA,CAzBA;;IA0BA8B;MACA;QACA;UACAC;YACA;cACA;gBACA3B,gBADA;gBAEA4B;cAFA;cAIA;cACA;YACA;UACA,CATA;QAUA,CAXA,MAWA;UACA;YACA5B,kBADA;YAEA4B;UAFA;UAIA;QACA;MACA,CAnBA;IAqBA,CAhDA;;IAiDAC;MACA;MACA;IACA,CApDA;;IAqDAC;MACA;QACAnB,aADA;QAEAR,kBAFA;QAGAc;MAHA;MAKA;IACA,CA5DA;;IA6DA;MACA;QAAArB;MAAA;MACA;;MACA;QACA;MACA;IACA,CAnEA;;IAoEAmC;MACA;MACA;IACA,CAvEA;;IAwEAC;MACA;QACA;UACAhC,iBADA;UAEA4B;QAFA;QAIA;MACA;;MACA;QACA;UACAK;YACA;cACA;gBACAjC,gBADA;gBAEA4B;cAFA;YAIA;UACA,CAPA;UAQA;QACA,CAVA,MAUA;UACA;YACA5B,kBADA;YAEA4B;UAFA;UAIA;QACA;MACA,CAlBA;IAmBA,CAnGA;;IAoGAM;MACA;QACA7B,aADA;QAEAP;MAFA;IAIA,CAzGA;;IA0GA;MACA;QAAAF;MAAA;MACA;IACA,CA7GA;;IA8GAuC;MACA;MACA;IACA,CAjHA;;IAkHAC;MACA;MACA;IACA,CArHA;;IAsHA;MACA;QACA;UAAAxC;QAAA;QACA;MACA,CAHA,MAGA;QACA;UAAAA;QAAA;QACA;MACA;;MACA;MACA;IACA,CAhIA;;IAiIA;MACA;;MACA;QACAyC;MACA;IACA,CAtIA;;IAuIAC;MACA;QACA3B,aADA;QAEAb,cAFA;QAGAc;MAHA;MAKA;IACA,CA9IA;;IA+IA;MACA;QACA2B;UACA;YACA;cACAvC,gBADA;cAEA4B;YAFA;YAIA;UACA;QACA,CARA;MASA,CAVA,MAUA;QACAY;UACA;YACA;cACAxC,gBADA;cAEA4B;YAFA;YAIA;UACA;QACA,CARA;MASA,CAVA,MAUA;QACAa;UACA;YACA;cACAzC,gBADA;cAEA4B;YAFA;YAIA;UACA;QACA,CARA;MASA,CAVA,MAUA,iBAEA;IACA,CAjLA;;IAkLA;MACA;QACA;UAAAhC;QAAA;QACA;MACA,CAHA,MAGA;QACA;UAAAA;QAAA;QACA;MACA;IACA,CA1LA;;IA2LA8C;MACA;QACA;MACA;;MACA;QACA/B,WADA;QAEAgC,gBAFA;QAGAC;MAHA;IAKA,CApMA;;IAqMA;MACA;QAAAhD;MAAA;MACA;IACA,CAxMA;;IAyMAiD;MACA;IACA;;EA3MA,CAnDA;;EAgQAC;IACA;EACA,CAlQA;;EAmQAC;IACAC;MACA;QACA;MACA;IACA;;EALA;AAnQA","names":["name","components","TreeSelect","props","data","messageToSendRules","msg","required","message","trigger","verifyRules","isAgree","messageToSend","to","buildingList","activeName","msgActiveName","departActiveName","msgDetail","id","user","msgDialogVisible","departVerifyDialogVisible","verifyDialogVisible","departApplicationUser","reason","pageInfo","listQuery","page","rows","entity","student","departVerifyList","methods","submitVerify","update","type","showVerifyDialog","closeVerifyDialog","departVerifyDialogClose","sendMsg","sendToBuilding","cancel","handleCurrentChange","handleSizeChange","store","msgDialogClose","deleteReceive","deleteSend","del","normalizer","label","children","hidePopover","mounted","watch","change"],"sourceRoot":"src/components/Message","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-tabs v-model=\"activeName\" tab-position=\"left\" @tab-click=\"doTapChange\">\r\n      <el-tab-pane label=\"通知\" name=\"1\">\r\n        <el-tabs v-model=\"msgActiveName\" @tab-click=\"doMsgTapChange\">\r\n          <el-tab-pane label=\"我收到的\" name=\"receive\">\r\n            <div style=\"width: 80%;margin: 0 auto\">\r\n              <el-table :data=\"pageInfo.list\" height=\"470\">\r\n                <el-table-column\r\n                    label=\"序号\" width=\"80\"\r\n                >\r\n                  <template slot-scope=\"scope\">{{ (listQuery.page - 1) * (listQuery.rows) + scope.$index + 1 }}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"内容\" width=\"400\">\r\n                  <template slot-scope=\"scope\">{{scope.row.msg.substr(0,15)}}{{scope.row.msg.length > 15 ? \"...\" : \"\"}}</template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"user.realName\" label=\"发送者\" width=\"200\"></el-table-column>\r\n                <el-table-column label=\"时间\" prop=\"time\" width=\"200\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200\">\r\n                  <template slot-scope=\"scope\">\r\n                    <template>\r\n                      <el-badge is-dot class=\"item\" v-if=\"!scope.row.isRead\">\r\n                      <el-button size=\"mini\" type=\"primary\" @click=\"msgQuery(scope.row.id, 1)\">查看\r\n                      </el-button>\r\n                      </el-badge>\r\n                      <el-button v-else size=\"mini\" type=\"primary\" @click=\"msgQuery(scope.row.id, 1)\">查看\r\n                      </el-button>\r\n                      <el-popconfirm title=\"确定删除吗？\" @confirm=\"msgDel(scope.row.id, 1)\">\r\n                        <el-button style=\"margin-left: 8px\"\r\n                                   slot=\"reference\"\r\n                                   size=\"mini\" type=\"danger\">删除\r\n                        </el-button>\r\n                      </el-popconfirm>\r\n                    </template>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div class=\"page\" style=\"margin-top: 10px\">\r\n                <el-pagination\r\n                    background\r\n                    :hide-on-single-page=\"false\"\r\n                    :page-size=\"listQuery.rows\"\r\n                    :page-count=\"pageInfo.pages\"\r\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\r\n                    :total=\"pageInfo.total\"\r\n                    :current-page.sync=\"pageInfo.pageNum\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    @size-change=\"handleSizeChange\"\r\n                >\r\n                </el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"我发送的\" name=\"send\">\r\n            <div style=\"width: 60%;margin: 0 auto\">\r\n              <el-table :data=\"pageInfo.list\" height=\"470\">\r\n                <el-table-column\r\n                    label=\"序号\" width=\"80\"\r\n                >\r\n                  <template slot-scope=\"scope\">{{ (listQuery.page - 1) * (listQuery.rows) + scope.$index + 1 }}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"内容\" width=\"320\">\r\n                  <template slot-scope=\"scope\">{{scope.row.msg.substr(0,15)}}{{scope.row.msg.length > 15 ? \"...\" : \"\"}}</template>\r\n                </el-table-column>\r\n                <el-table-column label=\"时间\" prop=\"time\" width=\"200\"></el-table-column>\r\n                <el-table-column label=\"操作\" width=\"200\">\r\n                  <template slot-scope=\"scope\">\r\n                    <template>\r\n                      <el-button size=\"mini\" type=\"primary\" @click=\"msgQuery(scope.row.id, 2)\">查看\r\n                      </el-button>\r\n                      <el-popconfirm title=\"确定删除吗？\" @confirm=\"msgDel(scope.row.id, 2)\">\r\n                        <el-button style=\"margin-left: 8px\"\r\n                                   slot=\"reference\"\r\n                                   size=\"mini\" type=\"danger\">删除\r\n                        </el-button>\r\n                      </el-popconfirm>\r\n                    </template>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div class=\"page\" style=\"margin-top: 10px\">\r\n                <el-pagination\r\n                    background\r\n                    :hide-on-single-page=\"false\"\r\n                    :page-size=\"listQuery.rows\"\r\n                    :page-count=\"pageInfo.pages\"\r\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\r\n                    :total=\"pageInfo.total\"\r\n                    :current-page.sync=\"pageInfo.pageNum\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    @size-change=\"handleSizeChange\"\r\n                >\r\n                </el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"退宿审核\" name=\"2\">\r\n        <el-tabs v-model=\"departActiveName\" @tab-click=\"doDepartTabChange\">\r\n          <el-tab-pane label=\"我审核的\" name=\"receive\">\r\n            <div style=\"width: 90%;margin: 0 auto\">\r\n              <el-table :data=\"pageInfo.list\" height=\"470\">\r\n                <el-table-column label=\"学生姓名\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-popover\r\n                        placement=\"bottom\"\r\n                        width=\"200\"\r\n                        trigger=\"click\" @show=\"getStudent(scope.row.application.student.id)\" @hide=\"hidePopover\">\r\n                      <el-form label-width=\"40px\">\r\n                        <el-form-item label=\"姓名\">\r\n                          <el-input v-model=\"student.name\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"学号\">\r\n                          <el-input v-model=\"student.number\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"电话\">\r\n                          <el-input v-model=\"student.phone\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"班级\" v-if=\"student.faculty\">\r\n                          <el-input v-model=\"student.faculty.name\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"寝室\" v-if=\"student.room\">\r\n                          <el-input v-model=\"student.room.number\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                      </el-form>\r\n                      <span slot=\"reference\" style=\"color: #409EFF;cursor: pointer\">{{scope.row.application.student.name}}</span>\r\n                    </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"申请人\" prop=\"application.applyUser.realName\"></el-table-column>\r\n                <el-table-column label=\"申请理由\" :show-overflow-tooltip=\"true\" prop=\"application.reason\"></el-table-column>\r\n                <el-table-column label=\"申请时间\" prop=\"application.time\"></el-table-column>\r\n                <el-table-column label=\"是否通过\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\r\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">通过</span>\r\n                    <span style=\"color: #F56C6C\" v-else>不通过</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作时间\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\r\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">{{scope.row.operateTime}}</span>\r\n                    <span style=\"color: #F56C6C\" v-else>{{scope.row.operateTime}}</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"审核理由\" :show-overflow-tooltip=\"true\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.isAgree===undefined\">未审核</span>\r\n                    <span style=\"color: #67C23A\" v-else-if=\"scope.row.isAgree\">{{scope.row.reason}}</span>\r\n                    <span style=\"color: #F56C6C\" v-else>{{scope.row.reason}}</span>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button type=\"primary\" size=\"mini\" :disabled=\"scope.row.isAgree !== undefined\" @click=\"showVerifyDialog(scope.row.id)\">审核</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </div>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"我发起的\" name=\"send\">\r\n            <div style=\"width: 80%;margin: 0 auto\">\r\n              <el-table :data=\"pageInfo.list\" height=\"470\">\r\n                <el-table-column label=\"学生姓名\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-popover\r\n                        placement=\"bottom\"\r\n                        width=\"200\"\r\n                        trigger=\"click\" @show=\"getStudent(scope.row.student.id)\" @hide=\"hidePopover\">\r\n                      <el-form label-width=\"40px\">\r\n                        <el-form-item label=\"姓名\">\r\n                          <el-input v-model=\"student.name\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"学号\">\r\n                          <el-input v-model=\"student.number\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"电话\">\r\n                          <el-input v-model=\"student.phone\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"班级\" v-if=\"student.faculty\">\r\n                          <el-input v-model=\"student.faculty.name\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"寝室\" v-if=\"student.room\">\r\n                          <el-input v-model=\"student.room.number\" readonly size=\"mini\"></el-input>\r\n                        </el-form-item>\r\n                      </el-form>\r\n                      <span slot=\"reference\" style=\"color: #409EFF;cursor: pointer\">{{scope.row.student.name}}</span>\r\n                    </el-popover>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"理由\" prop=\"reason\"></el-table-column>\r\n                <el-table-column label=\"申请时间\" prop=\"time\"></el-table-column>\r\n                <el-table-column label=\"状态\">\r\n                  <template slot-scope=\"scope\">\r\n                    {{scope.row.isFinished ? '已结束，' + (scope.row.isPass? \"通过\":\"不通过\"):'正在审核'}}\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\">\r\n                  <template slot-scope=\"scope\">\r\n                    <el-button size=\"mini\" type=\"primary\" @click=\"showDepartVerifyDialog(scope.row.id)\">查看审核记录</el-button>\r\n                    <el-button size=\"mini\" type=\"danger\" :disabled=\"scope.row.isFinished\" @click=\"msgDel(scope.row.id, 3)\">撤销申请</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div class=\"page\" style=\"margin-top: 10px\">\r\n                <el-pagination\r\n                    background\r\n                    :hide-on-single-page=\"false\"\r\n                    :page-size=\"listQuery.rows\"\r\n                    :page-count=\"pageInfo.pages\"\r\n                    layout=\"->, prev, pager, next, jumper, total, sizes\"\r\n                    :total=\"pageInfo.total\"\r\n                    :current-page.sync=\"pageInfo.pageNum\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    @size-change=\"handleSizeChange\"\r\n                >\r\n                </el-pagination>\r\n              </div>\r\n            </div>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"发送通知\" name=\"4\" v-has-permi=\"['home:send:msg']\">\r\n        <div style=\"width: 80%;margin: 20px auto\">\r\n          <el-form :model=\"messageToSend\" ref=\"sendMsg\" :rules=\"messageToSendRules\" label-width=\"100px\">\r\n            <el-form-item label=\"接收宿舍楼\" prop=\"to\">\r\n              <tree-select\r\n                  @open=\"listBuildingList\"\r\n                  v-model=\"messageToSend.to\"\r\n                  :options=\"buildingList\"\r\n                  :normalizer=\"normalizer\"\r\n                  :show-count=\"true\"\r\n                  placeholder=\"选择宿舍楼\">\r\n              </tree-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"通知内容\" prop=\"msg\">\r\n              <el-input type=\"textarea\" v-model=\"messageToSend.msg\" rows=\"10\" placeholder=\"输入通知内容\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"sendMsg\">发 送</el-button>\r\n              <el-button type=\"danger\" @click=\"cancel\">清 空</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <div class=\"msg-dialog\">\r\n      <el-dialog :visible.sync=\"msgDialogVisible\" @closed=\"msgDialogClose\" append-to-body title=\"详情\" width=\"40%\">\r\n        <el-form label-width=\"80px\">\r\n          <el-form-item label=\"发送者\" v-if=\"msgDetail.user\">\r\n            <el-input readonly v-model=\"msgDetail.user.realName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"时间\">\r\n            <el-input readonly v-model=\"msgDetail.time\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"内容\">\r\n            <el-input type=\"textarea\" readonly v-model=\"msgDetail.msg\" rows=\"10\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"接收者\" v-if=\"msgDetail.receiveUsers\">\r\n            <div style=\"width:50%;float: left\" v-for=\"item of msgDetail.receiveUsers\">\r\n              <span>{{item.user.realName}} </span>\r\n              <span v-if=\"item.isRead\" style=\"color: #67C23A\"> 已读</span>\r\n              <span v-else style=\"color: #909399\"> 未读</span>\r\n            </div>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </div>\r\n    <div class=\"depart-dialog\">\r\n      <el-dialog :visible.sync=\"departVerifyDialogVisible\" @closed=\"departVerifyDialogClose\"\r\n                 append-to-body title=\"审核记录\" width=\"40%\">\r\n        <el-timeline>\r\n          <el-timeline-item\r\n              v-for=\"(activity, index) in departVerifyList\"\r\n              :key=\"index\"\r\n              :color=\"activity.isAgree === undefined?'':activity.isAgree?'#0bbd87':'#f56c6c'\"\r\n              :timestamp=\"activity.operateTime\">\r\n            {{activity.operateUser.realName + \"：\" +\r\n          (activity.isAgree===undefined ? \"等待审核\" : ((activity.isAgree?\"通过\":\"不通过\") +  \"，原因：\" + (activity.reason||\"无\")))}}\r\n          </el-timeline-item>\r\n        </el-timeline>\r\n      </el-dialog>\r\n      <el-dialog :visible.sync=\"verifyDialogVisible\" append-to-body title=\"审核\" @close=\"closeVerifyDialog\" width=\"45%\">\r\n        <el-form label-width=\"80px\" :rules=\"verifyRules\" :model=\"departApplicationUser\" ref=\"verifyForm\">\r\n          <el-form-item label=\"是否通过\" prop=\"isAgree\">\r\n            <el-radio v-model=\"departApplicationUser.isAgree\" :label=\"true\">通过</el-radio>\r\n            <el-radio v-model=\"departApplicationUser.isAgree\" :label=\"false\">不通过</el-radio>\r\n          </el-form-item>\r\n          <el-form-item label=\"原因\">\r\n            <el-input type=\"textarea\" rows=\"10\" v-model=\"departApplicationUser.reason\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"submitVerify\">提 交</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {list, deleteReceive, deleteSend, query,listSend, sendToBuilding, querydetail} from \"@/api/notice\";\r\nimport {del, listFlow, listMy, listMyFlow, query as queryDepart, update} from \"@/api/depart\";\r\nimport {list as listBuilding} from '@/api/building'\r\nimport {query as queryStudent} from '@/api/student'\r\nimport TreeSelect from '@riophae/vue-treeselect'\r\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\r\nimport {countUnread} from \"@/api/login\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"index\",\r\n  components: {TreeSelect},\r\n  props: ['change'],\r\n  data() {\r\n    return {\r\n      messageToSendRules:{\r\n        msg: [\r\n          {required: true, message: '请填写内容', trigger: 'blur'}\r\n        ]\r\n      },\r\n      verifyRules: {\r\n        isAgree: [\r\n          {required: true, message:\"选择是否同意\",trigger: \"blur\"}\r\n        ]\r\n      },\r\n      messageToSend: {\r\n        msg:undefined,\r\n        to: undefined\r\n      },\r\n      buildingList:[],\r\n      activeName: '1',\r\n      msgActiveName: 'receive',\r\n      departActiveName: 'receive',\r\n      msg:{\r\n        to: undefined,\r\n        msg: undefined\r\n      },\r\n      msgDetail: {\r\n        id: undefined,\r\n        msg: undefined,\r\n        user: {}\r\n      },\r\n      msgDialogVisible: false,\r\n      departVerifyDialogVisible: false,\r\n      verifyDialogVisible: false,\r\n      departApplicationUser: {\r\n        id: undefined,\r\n        isAgree: undefined,\r\n        reason: undefined\r\n      },\r\n      pageInfo: {},\r\n      listQuery: {\r\n        page: 1,\r\n        rows: 10,\r\n        entity: {}\r\n      },\r\n      student: {},\r\n      departVerifyList: []\r\n    }\r\n  },\r\n  methods: {\r\n    async doTapChange() {\r\n      let tab = this.activeName\r\n      await this.refreshCount()\r\n      if (tab === '1') {\r\n        await this.doMsgTapChange()\r\n      } else if (tab === '2') {\r\n        await this.doDepartTabChange()\r\n      } else if (tab === '3') {\r\n\r\n      } else if (tab === '4') {\r\n        this.messageToSend = {\r\n          msg:undefined,\r\n          to: undefined\r\n        }\r\n      }\r\n    },\r\n    async doDepartTabChange() {\r\n      if (this.departActiveName === 'receive') {\r\n        const {data} = await listMyFlow(this.listQuery)\r\n        this.pageInfo = data\r\n      } else {\r\n        const {data} = await listMy(this.listQuery)\r\n        this.pageInfo = data\r\n      }\r\n    },\r\n    submitVerify() {\r\n      this.$refs['verifyForm'].validate((valid) => {\r\n        if (valid) {\r\n          update(this.departApplicationUser).then(res => {\r\n            if (res.statusCode === 200) {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success'\r\n              });\r\n              this.doTapChange()\r\n              this.closeVerifyDialog()\r\n            }\r\n          })\r\n        } else {\r\n          this.$message({\r\n            message: '请正确填写参数',\r\n            type: 'error'\r\n          });\r\n          return false;\r\n        }\r\n      })\r\n\r\n    },\r\n    showVerifyDialog(id) {\r\n      this.departApplicationUser.id = id\r\n      this.verifyDialogVisible = true\r\n    },\r\n    closeVerifyDialog() {\r\n      this.departApplicationUser = {\r\n        id: undefined,\r\n        isAgree: undefined,\r\n        reason: undefined\r\n      }\r\n      this.verifyDialogVisible = false\r\n    },\r\n    async showDepartVerifyDialog(id) {\r\n      const {data} = await listFlow(id)\r\n      this.departVerifyList = data\r\n      if (data) {\r\n        this.departVerifyDialogVisible = true\r\n      }\r\n    },\r\n    departVerifyDialogClose() {\r\n      this.departVerifyList = []\r\n      this.departVerifyDialogVisible = false\r\n    },\r\n    sendMsg() {\r\n      if (this.messageToSend.to === undefined) {\r\n        this.$message({\r\n          message: '请选择宿舍楼',\r\n          type: 'error'\r\n        });\r\n        return\r\n      }\r\n      this.$refs['sendMsg'].validate((valid) => {\r\n        if (valid) {\r\n          sendToBuilding(this.messageToSend).then(res => {\r\n            if (res.statusCode === 200) {\r\n              this.$message({\r\n                message: res.msg,\r\n                type: 'success'\r\n              });\r\n            }\r\n          })\r\n          this.cancel()\r\n        } else {\r\n          this.$message({\r\n            message: '请正确填写参数',\r\n            type: 'error'\r\n          });\r\n          return false;\r\n        }\r\n      })\r\n    },\r\n    cancel() {\r\n      this.messageToSend = {\r\n        to: undefined,\r\n        msg: undefined\r\n      }\r\n    },\r\n    async listBuildingList() {\r\n      const {data} = await listBuilding()\r\n      this.buildingList = data\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.listQuery.page = val\r\n      this.doTapChange(this.activeName)\r\n    },\r\n    handleSizeChange(val) {\r\n      this.listQuery.rows = val\r\n      this.doTapChange(this.activeName)\r\n    },\r\n    async msgQuery(id,type) {\r\n      if (type === 1) {\r\n        const {data} = await query(id)\r\n        this.msgDetail = data\r\n      } else if (type === 2) {\r\n        const {data} = await querydetail(id)\r\n        this.msgDetail = data\r\n      }\r\n      await this.doTapChange(this.activeName)\r\n      this.msgDialogVisible = true\r\n    },\r\n    async refreshCount() {\r\n      const count = await countUnread()\r\n      if (count) {\r\n        store.commit('SET_COUNT_UNREAD', count.data)\r\n      }\r\n    },\r\n    msgDialogClose() {\r\n      this.msgDetail = {\r\n        id: undefined,\r\n        msg: undefined,\r\n        user: undefined\r\n      }\r\n      this.msgDialogVisible = false\r\n    },\r\n    async msgDel(id, type) {\r\n      if (type === 1) {\r\n        deleteReceive(id).then(res => {\r\n          if (res.statusCode === 200) {\r\n            this.$message({\r\n              message: res.msg,\r\n              type:'success'\r\n            })\r\n            this.doTapChange(this.activeName)\r\n          }\r\n        })\r\n      } else if (type === 2){\r\n        deleteSend(id).then(res => {\r\n          if (res.statusCode === 200) {\r\n            this.$message({\r\n              message: res.msg,\r\n              type:'success'\r\n            })\r\n            this.doTapChange(this.activeName)\r\n          }\r\n        })\r\n      } else if (type === 3) {\r\n        del(id).then(res => {\r\n          if (res.statusCode === 200) {\r\n            this.$message({\r\n              message: res.msg,\r\n              type:'success'\r\n            })\r\n            this.doTapChange(this.activeName)\r\n          }\r\n        })\r\n      } else if (type === 4) {\r\n\r\n      }\r\n    },\r\n    async doMsgTapChange() {\r\n      if (this.msgActiveName === 'receive') {\r\n        const {data} = await list(this.listQuery)\r\n        this.pageInfo = data\r\n      } else {\r\n        const {data} = await listSend(this.listQuery)\r\n        this.pageInfo = data\r\n      }\r\n    },\r\n    normalizer(node) {\r\n      if (node.children && !node.children.length) {\r\n        delete node.children;\r\n      }\r\n      return {\r\n        id: node.id,\r\n        label: node.name,\r\n        children: node.children\r\n      };\r\n    },\r\n    async getStudent(id) {\r\n      const {data} = await queryStudent(id)\r\n      this.student = data\r\n    },\r\n    hidePopover() {\r\n      this.student = {}\r\n    }\r\n  },\r\n  mounted() {\r\n    this.doTapChange(this.activeName)\r\n  },\r\n  watch: {\r\n    change(val) {\r\n      if (val === 1) {\r\n        this.doTapChange(this.activeName)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}