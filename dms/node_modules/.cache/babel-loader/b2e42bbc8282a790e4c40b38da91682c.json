{"remainingRequest":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\babel-loader\\lib\\index.js!D:\\实习\\宿舍管理系统\\dms\\src\\utils\\request.js","dependencies":[{"path":"D:\\实习\\宿舍管理系统\\dms\\src\\utils\\request.js","mtime":1644741256000},{"path":"D:\\实习\\宿舍管理系统\\dms\\babel.config.js","mtime":1644741256000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyBnZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlLCBNZXNzYWdlQm94IH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKY29uc3Qgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICB0aW1lb3V0OiAxMDAwMAp9KTsgLy8gcmVxdWVzdOaLpuaIquWZqAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoYXN5bmMgY29uZmlnID0+IHsKICBsZXQgdG9rZW4gPSBnZXRUb2tlbigpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydfdXQnXSA9IHRva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZXJyb3IgPT4gewogIGNvbnNvbGUubG9nKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy9yZXNwb25zZSDmi6bmiKrlmagKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXNwb25zZSA9PiB7CiAgY29uc3QgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgaWYgKHJlcy5zdGF0dXNDb2RlID09PSAyMDApIHsKICAgIHJldHVybiByZXM7CiAgfSBlbHNlIHsKICAgIGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gNDA3KSB7CiAgICAgIGlmICghc3RvcmUuc3RhdGUucmVMb2dpbkNvbmZpcm0pIHsKICAgICAgICBNZXNzYWdlQm94LmNvbmZpcm0oJ+eZu+W9lei/h+acnyzor7fph43mlrDnmbvlvZUnLCAn56Gu6K6k6YCA5Ye6JywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfph43mlrDnmbvlvZUnLAogICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSk7CiAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfUkVfTE9HSU5fQ09NRklSTSIpOwogICAgICB9IGVsc2UgewogICAgICAgIE1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgTWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogcmVzLm1zZyB8fCAnRXJyb3InLAogICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgZHVyYXRpb246IDQgKiAxMDAwCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEVycm9yKHJlcy5tc2cgfHwgJ0Vycm9yJykpOwogIH0KfSwgZXJyb3IgPT4gewogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB8fCAiRXJyb3IiLAogICAgdHlwZTogJ2Vycm9yJywKICAgIGR1cmF0aW9uOiA0ICogMTAwMAogIH0pOwogIHJldHVybiBQcm9taXNlLnJlc29sdmUoZXJyb3IpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"names":["getToken","removeToken","axios","Message","MessageBox","store","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","token","headers","error","console","log","Promise","reject","response","res","data","statusCode","state","reLoginConfirm","confirm","confirmButtonText","type","then","location","reload","commit","message","msg","duration","resolve","Error"],"sources":["D:/实习/宿舍管理系统/dms/src/utils/request.js"],"sourcesContent":["import {getToken, removeToken} from '@/utils/auth'\r\nimport axios from 'axios'\r\nimport {Message, MessageBox} from 'element-ui'\r\nimport store from \"@/store\";\r\n\r\nconst service = axios.create({\r\n    baseURL: process.env.VUE_APP_BASE_API,\r\n    timeout: 10000\r\n})\r\n// request拦截器\r\nservice.interceptors.request.use(\r\n    async config => {\r\n        let token = getToken()\r\n        if (token) {\r\n            config.headers['_ut'] = token\r\n        }\r\n        return config\r\n    },\r\n    error => {\r\n        console.log(error)\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n//response 拦截器\r\nservice.interceptors.response.use(\r\n    response => {\r\n        const res = response.data\r\n        if (res.statusCode === 200) {\r\n            return res\r\n        } else {\r\n            if (res.statusCode === 407) {\r\n                if (!store.state.reLoginConfirm) {\r\n                    MessageBox.confirm('登录过期,请重新登录', '确认退出', {\r\n                        confirmButtonText: '重新登录',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        removeToken()\r\n                        location.reload()\r\n                    })\r\n                    store.commit(\"SET_RE_LOGIN_COMFIRM\")\r\n                } else {\r\n                    Message({\r\n                        message: res.msg,\r\n                        type: 'error'\r\n                    })\r\n                }\r\n            } else {\r\n                Message({\r\n                    message: res.msg || 'Error',\r\n                    type: 'error',\r\n                    duration: 4 * 1000\r\n                })\r\n            }\r\n            return Promise.resolve(new Error(res.msg || 'Error'))\r\n        }\r\n    },\r\n    error => {\r\n        Message({\r\n            message: error.message || \"Error\",\r\n            type: 'error',\r\n            duration: 4 * 1000\r\n        })\r\n        return Promise.resolve(error)\r\n    }\r\n)\r\n\r\nexport default service\r\n"],"mappings":";AAAA,SAAQA,QAAR,EAAkBC,WAAlB,QAAoC,cAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,OAAR,EAAiBC,UAAjB,QAAkC,YAAlC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EACzBC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADI;EAEzBC,OAAO,EAAE;AAFgB,CAAb,CAAhB,C,CAIA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,MAAMC,MAAN,IAAgB;EACZ,IAAIC,KAAK,GAAGjB,QAAQ,EAApB;;EACA,IAAIiB,KAAJ,EAAW;IACPD,MAAM,CAACE,OAAP,CAAe,KAAf,IAAwBD,KAAxB;EACH;;EACD,OAAOD,MAAP;AACH,CAPL,EAQIG,KAAK,IAAI;EACLC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACA,OAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH,CAXL,E,CAaA;;AACAb,OAAO,CAACO,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CACIS,QAAQ,IAAI;EACR,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;EACA,IAAID,GAAG,CAACE,UAAJ,KAAmB,GAAvB,EAA4B;IACxB,OAAOF,GAAP;EACH,CAFD,MAEO;IACH,IAAIA,GAAG,CAACE,UAAJ,KAAmB,GAAvB,EAA4B;MACxB,IAAI,CAACtB,KAAK,CAACuB,KAAN,CAAYC,cAAjB,EAAiC;QAC7BzB,UAAU,CAAC0B,OAAX,CAAmB,YAAnB,EAAiC,MAAjC,EAAyC;UACrCC,iBAAiB,EAAE,MADkB;UAErCC,IAAI,EAAE;QAF+B,CAAzC,EAGGC,IAHH,CAGQ,MAAM;UACVhC,WAAW;UACXiC,QAAQ,CAACC,MAAT;QACH,CAND;QAOA9B,KAAK,CAAC+B,MAAN,CAAa,sBAAb;MACH,CATD,MASO;QACHjC,OAAO,CAAC;UACJkC,OAAO,EAAEZ,GAAG,CAACa,GADT;UAEJN,IAAI,EAAE;QAFF,CAAD,CAAP;MAIH;IACJ,CAhBD,MAgBO;MACH7B,OAAO,CAAC;QACJkC,OAAO,EAAEZ,GAAG,CAACa,GAAJ,IAAW,OADhB;QAEJN,IAAI,EAAE,OAFF;QAGJO,QAAQ,EAAE,IAAI;MAHV,CAAD,CAAP;IAKH;;IACD,OAAOjB,OAAO,CAACkB,OAAR,CAAgB,IAAIC,KAAJ,CAAUhB,GAAG,CAACa,GAAJ,IAAW,OAArB,CAAhB,CAAP;EACH;AACJ,CA/BL,EAgCInB,KAAK,IAAI;EACLhB,OAAO,CAAC;IACJkC,OAAO,EAAElB,KAAK,CAACkB,OAAN,IAAiB,OADtB;IAEJL,IAAI,EAAE,OAFF;IAGJO,QAAQ,EAAE,IAAI;EAHV,CAAD,CAAP;EAKA,OAAOjB,OAAO,CAACkB,OAAR,CAAgBrB,KAAhB,CAAP;AACH,CAvCL;AA0CA,eAAeb,OAAf"}]}