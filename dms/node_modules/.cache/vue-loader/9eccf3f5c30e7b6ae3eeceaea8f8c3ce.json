{"remainingRequest":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\实习\\宿舍管理系统\\dms\\src\\views\\manage\\repair\\components\\imagesUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\实习\\宿舍管理系统\\dms\\src\\views\\manage\\repair\\components\\imagesUpload.vue","mtime":1644741256000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\实习\\宿舍管理系统\\dms\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge2dldFRva2VufSBmcm9tICJAL3V0aWxzL2F1dGgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiaW1hZ2VzVXBsb2FkIiwNCiAgcHJvcHM6ew0KICAgIGltYWdlczogew0KICAgICAgZGVmYXVsdDogKCkgPT4gW10NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRpYWxvZ0ltYWdlVXJsOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgYWN0aW9uOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJICsgIi9wZXJtaXNzaW9uL3VwbG9hZCIsDQogICAgICBoZWFkZXI6IHsNCiAgICAgICAgIl91dCI6IGdldFRva2VuKCkNCiAgICAgIH0sDQogICAgICBpbWFnZUxpc3Q6IFtdLA0KICAgICAgZmlsZUxpc3Q6IFtdDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy5pbWFnZUxpc3Quc3BsaWNlKHRoaXMuaW1hZ2VMaXN0LmluZGV4T2YoZmlsZS5zYXZlTmFtZSksIDEpDQogICAgICB0aGlzLiRlbWl0KCJvbkNoYW5nZSIsIHRoaXMuaW1hZ2VMaXN0KQ0KICAgIH0sDQogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3KGZpbGUpIHsNCiAgICAgIHRoaXMuZGlhbG9nSW1hZ2VVcmwgPSBmaWxlLnVybDsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsNCiAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSAhPT0gMjAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICB9KTsNCiAgICAgICAgZmlsZUxpc3Quc3BsaWNlKGZpbGVMaXN0LmluZGV4T2YoZmlsZSksIDEpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBmaWxlLnNhdmVOYW1lID0gcmVzLmRhdGENCiAgICAgICAgdGhpcy5pbWFnZUxpc3QucHVzaChyZXMuZGF0YSkNCiAgICAgICAgdGhpcy4kZW1pdCgib25DaGFuZ2UiLCB0aGlzLmltYWdlTGlzdCkNCiAgICAgIH0NCiAgICB9LA0KICAgIGluaXQoKSB7DQogICAgICB0aGlzLmZpbGVMaXN0ID0gW10NCiAgICAgIGZvciAobGV0IGkgb2YgdGhpcy5pbWFnZXMpIHsNCiAgICAgICAgdGhpcy5pbWFnZUxpc3QucHVzaChpKQ0KICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goew0KICAgICAgICAgIHNhdmVOYW1lOiBpLA0KICAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9JTUdfUFJFRklYICsgaQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["imagesUpload.vue"],"names":[],"mappings":";AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"imagesUpload.vue","sourceRoot":"src/views/manage/repair/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-upload\r\n        :action=\"action\"\r\n        :headers=\"header\"\r\n        list-type=\"picture-card\"\r\n        :on-preview=\"handlePictureCardPreview\"\r\n        :on-success=\"handleSuccess\"\r\n        :file-list=\"fileList\"\r\n        :on-remove=\"handleRemove\">\r\n      <i class=\"el-icon-plus\"></i>\r\n    </el-upload>\r\n    <el-dialog :visible.sync=\"dialogVisible\" append-to-body>\r\n      <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getToken} from \"@/utils/auth\";\r\nexport default {\r\n  name: \"imagesUpload\",\r\n  props:{\r\n    images: {\r\n      default: () => []\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dialogImageUrl: '',\r\n      dialogVisible: false,\r\n      action: process.env.VUE_APP_BASE_API + \"/permission/upload\",\r\n      header: {\r\n        \"_ut\": getToken()\r\n      },\r\n      imageList: [],\r\n      fileList: []\r\n    };\r\n  },\r\n  methods: {\r\n    handleRemove(file, fileList) {\r\n      this.imageList.splice(this.imageList.indexOf(file.saveName), 1)\r\n      this.$emit(\"onChange\", this.imageList)\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    handleSuccess(res, file, fileList) {\r\n      if (res.statusCode !== 200) {\r\n        this.$message({\r\n          message: res.msg,\r\n          type: 'error'\r\n        });\r\n        fileList.splice(fileList.indexOf(file), 1)\r\n      } else {\r\n        file.saveName = res.data\r\n        this.imageList.push(res.data)\r\n        this.$emit(\"onChange\", this.imageList)\r\n      }\r\n    },\r\n    init() {\r\n      this.fileList = []\r\n      for (let i of this.images) {\r\n        this.imageList.push(i)\r\n        this.fileList.push({\r\n          saveName: i,\r\n          url: process.env.VUE_APP_IMG_PREFIX + i\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}